<html>
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <!-- fonts -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:300,400,700">

  <script src="demo.js"></script>

  <title>Bitcoin Cryptography Demo</title>
</head>
<body>
All libraries are exported to the window scope.<br/>
Copy/paste the following code examples into the browser console:

<br/><br/>

<h1>SHA256</h1>
<pre>
  // create hash for the string 'BernerJS'
  var msg = Buffer.from('BernerJS');
  var msgHash = sha256(msg);
  console.log(msgHash.toString('hex'));
</pre>

<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>

<h1>ECC</h1>
<pre>
  // generate random private key of size 256bit
  var privKeyBuf = randomBytes(32);

  // construct a key pair from private key
  var keyPair = ECPair.fromPrivateKey(privKeyBuf);

  // public key
  console.log(keyPair.getPublicKeyBuffer().toString('hex'));

  // bitcoin address
  console.log(keyPair.getAddress());
</pre>

<h1>ECDSA</h1>
<pre>
  // Generate random private key
  var keyPair = ECPair.fromWIF('KyHzTjYc3wwAr5UkYrbUac1gGsDKwbfNkPjQRNhrDcw85w1gfBzu');

  // private key
  console.log(keyPair.d.toString(16));

  // public key
  console.log(keyPair.getPublicKeyBuffer().toString('hex'));

  // sign a message hash
  console.log(msgHash.toString('hex'));
  var signature = keyPair.sign(msgHash);
  console.log(signature.toDER().toString('hex'));

  // check signature
  var signatureBuffer = Buffer.from('304502210091b88ea00e0ae37b500c6cb9232de4a1d64baf9a2d804ec09670d51f1092fbc602204385cf273421ec0c45180bc74576cc0611c5ec9ceff77f19b374ae60eee25e37', 'hex');
  var verifySignature = ECSignature.fromDER(signatureBuffer);
  var verifyHash = Buffer.from('26d67cb1841abd904235d87630b62bb29b4fc350b34407eef2beb64f7fa0ffcd', 'hex');

  console.log(keyPair.verify(verifyHash, verifySignature));
</pre>
</body>
</html>
